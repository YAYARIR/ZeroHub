<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AIexplorer - Генератор сайтов</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
        }

        header {
            text-align: center;
        }

        #generator {
            margin-bottom: 20px;
        }

        #description {
            width: 100%;
            height: 100px;
        }

        #loader {
            display: none;
        }

        .hidden {
            display: none;
        }

        #notification {
            background-color: #4CAF50;
            color: white;
            padding: 15px;
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <header>
        <h1>AIexplorer</h1>
        <p>Генерируйте сайты с помощью AI!</p>
    </header>

    <main>
        <section id="generator">
            <h2>Создайте свой сайт</h2>
            <textarea id="description" placeholder="Опишите ваш сайт..."></textarea>
            <button id="generateBtn">Сгенерировать сайт</button>
            <div id="loader" class="hidden">Загрузка...</div>
            <button id="copyBtn" class="hidden">Скопировать HTML</button>
        </section>

        <section id="features">
            <h2>Особенности</h2>
            <ul>
                <li>Генерация кода на основе текстового описания.</li>
                <li>Адаптивный дизайн для всех устройств.</li>
                <li>История сгенерированных сайтов.</li>
            </ul>
        </section>

        <section id="how-it-works">
            <h2>Как это работает?</h2>
            <p>Введите описание вашего сайта, и AI сгенерирует HTML, CSS и JavaScript код.</p>
        </section>

        <section id="history">
            <h2>История генерации</h2>
            <ul id="historyList"></ul>
        </section>

        <footer>
            <p>&copy; 2023 AIexplorer. Все права защищены.</p>
        </footer>

        <!-- Уведомления -->
        <div id="notification" class="hidden"></div>

    </main>

    <!-- JavaScript -->
    <script type="text/javascript">
      document.getElementById('generateBtn').addEventListener('click', generateSite);
      document.getElementById('copyBtn').addEventListener('click', copyToClipboard);

      async function generateSite() {
          const description = document.getElementById('description').value;

          if (!description) {
              showNotification("Пожалуйста, введите описание сайта.");
              return;
          }

          document.getElementById('loader').style.display = 'block';

          try {
              const response = await fetch('https://api.example.com/generate', { AIzaSyBy9iTyELfMAZUTh4xiu0l1htRXE4MU3tA
                  method: 'POST',
                  headers: { 'Content-Type': 'application/json' },
                  body: JSON.stringify({ description })
              });

              if (!response.ok) throw new Error("Ошибка при генерации сайта.");

              const data = await response.json();

              // Открываем новое окно и вставляем сгенерированный HTML
              const newWindow = window.open();
              newWindow.document.write(data.html); // Предполагается, что API возвращает HTML
              newWindow.document.close(); // Закрываем поток документа

              // Сохранение в историю
              saveToHistory(description);

              document.getElementById('copyBtn').classList.remove('hidden');

          } catch (error) {
              showNotification(error.message);

          } finally {
              document.getElementById('loader').style.display = 'none';
          }
      }

      function copyToClipboard() {
          const htmlContent = document.getElementById('generatedSite').srcdoc;

          navigator.clipboard.writeText(htmlContent).then(() => {
              showNotification("HTML-код скопирован в буфер обмена!");
          }).catch(err => {
              showNotification("Ошибка при копировании кода.");
          });
      }

      function saveToHistory(description) {
          const historyList = document.getElementById('historyList');

          const listItem = document.createElement('li');
          listItem.textContent = description;

          historyList.appendChild(listItem);
      }

      function showNotification(message) {
         const notification = document.getElementById('notification');
         notification.textContent = message;
         notification.classList.remove('hidden');

         setTimeout(() => {
             notification.classList.add('hidden');
         }, 3000);
      }
    </script>

</body>
</html>
