<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Zero Music</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@700&display=swap" rel="stylesheet">
    <style>
        body {
            margin: 0;
            font-family: 'Roboto', sans-serif;
            background: linear-gradient(to top, #000000, #3b2470);
            color: white;
            height: 100vh; /* Занять всю высоту экрана */
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            position: relative;
            overflow-x: hidden; /* Запретить горизонтальную прокрутку */
        }
        .header {
            text-align: center;
            margin-top: 20px;
        }
        .music-card {
            background: linear-gradient(to bottom, #1a1a1a, #2b2b2b);
            border-radius: 15px;
            padding: 20px;
            margin: 20px auto;
            width: 80%;
            text-align: center;
            box-shadow: 0 4px 10px rgba(0,0,0,0.5);
        }
        .play-button {
            background-color: transparent;
            border: none;
            color: white;
            font-size: 30px;
            cursor: pointer;
        }
        .play-button:hover {
            transform: scale(1.05);
        }
        .stop-button {
            background-color: transparent;
            border: none;
            color: white;
            font-size: 30px;
            cursor: pointer;
        }
        .stop-button:hover {
            transform: scale(0.95);
        }
        .footer {
            position: fixed; /* Фиксированное позиционирование */
            bottom: 10px; /* Отступ от низа */
            left: 50%; /* Центрирование по горизонтали */
            transform: translateX(-50%); /* Центрирование по горизонтали */
            text-align: center; /* Выравнивание текста по центру */
        }
        .footer a {
            color: white; /* Цвет ссылки */
        }
        .music-controls {
			position : fixed; 
			bottom :60px; 
			left :0; 
			right :0; 
			background-color : rgba(255, 255, 255, 0.1); 
			padding :10px; 
			transition : opacity 0.5s ease; /* Плавное исчезновение */
			opacity :1; /* Начальная непрозрачность */
			display:none; /* Скрыть по умолчанию */
		}
		.music-controls.hidden { 
			opacity :0; /* Непрозрачность при скрытии */
		}
		input[type="range"] {
			width : calc(100% - 100px); /* Длина ползунка */
		}
		.symbols {
			position:absolute; 
			top:-50%; 
			left:-50%; 
			width :200%; 
			height :200%; 
			pointer-events:none; 
			color:white; 
			font-size :50px; 
			opacity :0.1; 
		}
		
		.white-stripe {
		    position:absolute; 
		    left:-50%; 
		    width :200%; 
		    height :50px; /* Высота полосы */
		    background-color:white; 
		    opacity:.2; /* Размытие полосы */
		    filter : blur(15px); /* Размытие */
		    z-index:-1; /* Позади других элементов */
		}

		.white-stripe.top { top:-25px; } /* Верхняя полоса */
		.white-stripe.bottom { bottom:-25px; } /* Нижняя полоса */

    </style>
</head>
<body>

<div class="white-stripe top"></div> <!-- Верхняя белая размытая полоса -->
<div class="white-stripe bottom"></div> <!-- Нижняя белая размытая полоса -->

<div class="symbols">✦ ✦ ✦ ✦ ✦ ✦ ✦ ✦ ✦ ✦✦ ✦ ✦ ✦ ✦ ✦ ✦ ✦ ✦ ✦✦ ✦ ✦ ✦ ✦ ✦ ✦ ✦ ✦ ✦✦ ✦ ✦ ✦ ✦ ✦ ✦ ✦ ✦ ✦✦ ✦ ✦ ✦ ✦ ✦ ✦ ✦ ✦ ✦✦ ✦ ✦ ✦ ✦ ✦ ✦ ✦ ✧✧✧</div>

<div class="header">
    <img src="{{ url_for(filename='images/MAIN.jpg') }}" alt="Zero Music" style="max-width:100%; height:auto;">
    <h1>Zero Music</h1>
</div>

<div class="music-card">
    <h2 id="music-name">Music Name</h2>
    <h3 id="music-author">Music Author</h3>
    <button class="play-button" onclick="playMusic()">▶️ Play</button>
</div>

<div class="music-controls" id="music-controls">
    <audio id="audio" preload="auto"></audio>
    <input type="range" id="seek-bar" value="0" step="1">
    <span id="time-remaining">00:00</span> <!-- Отображение оставшегося времени -->
    <button class="stop-button" onclick="stopMusic()">❌ Stop</button>
</div>

<div class="footer">
    <p>made by <a href="https://t.me/YAYRIRZ">@YAYRIRZ</a></p>
</div>

<script>
let audio = document.getElementById('audio');
let seekBar = document.getElementById('seek-bar');
let musicControls = document.getElementById('music-controls');
let timeRemaining = document.getElementById('time-remaining');

// Функция для смены трека
function changeTrack(src, name, author) {
    stopMusic(); // Остановить текущую музыку
    audio.src = src; // Установить новый трек
    document.getElementById('music-name').innerText = name; // Обновить название
    document.getElementById('music-author').innerText = author; // Обновить автора
}

// Обработчик события для обновления ползунка и оставшегося времени
audio.addEventListener('timeupdate', function() {
    seekBar.value = (audio.currentTime / audio.duration) * 100 || 0; 
    const remainingTime = audio.duration - audio.currentTime; // Оставшееся время
    timeRemaining.innerText = formatTime(remainingTime);
});

// Форматирование времени в минуты и секунды
function formatTime(seconds) {
    const minutes = Math.floor(seconds / 60);
    const secs = Math.floor(seconds % 60);
    return `${String(minutes).padStart(2, '0')}:${String(secs).padStart(2, '0')}`;
}

// Установка текущего времени аудио при изменении ползунка
seekBar.addEventListener('input', function() {
    audio.currentTime = (seekBar.value / 100) * audio.duration; 
});

// Функция для воспроизведения музыки
function playMusic() {
	musicControls.style.display = 'block';
	musicControls.classList.remove('hidden'); // Убираем класс скрытия
	audio.play();
}

// Функция для остановки музыки
function stopMusic() {
	audio.pause();
	audio.currentTime = 0;

	musicControls.classList.add('hidden'); // Добавляем класс скрытия

	setTimeout(() => { musicControls.style.display = 'none'; }, 500); // Скрываем после анимации
}

// Пример использования функции changeTrack для выбора трека
// Вы можете добавить свои треки здесь:
document.addEventListener("DOMContentLoaded", function() {
   changeTrack("{{ url_for(filename='test.mp3') }}", "Test (Undertale)", "TobyFox");
});
</script>

</body>
</html>
